PRD – 남남코치 프론트엔드 고도화 (Dev B – 2024-12-10)
0. Context

프로젝트명: 남남코치 (TDEE 기반 식단 코치)

목표:

이미 구현된 백엔드 API와 기본 UI를 기반으로,

식단 페이지(/meal-plans)를 “실제 데이터를 보여주는 대시보드” 수준까지 끌어올리고

쇼핑 페이지(/shopping)와의 연결도 준비하는 것.

기술 스택

Frontend: Vue 3 + Vite, Composition API, <script setup>

HTTP 통신: axios, 공통 클라이언트 src/api/http.js

API 모듈:

src/api/usersApi.js

src/api/mealPlanApi.js

src/api/shoppingApi.js 

IMPLEMENTED_FEATURES

⚠️ TypeScript 사용 X, 전부 JS + Vue Single File Component 기준으로 작업해줘.

1. 현재 상태 (요약)

이미 구현된 내용 (건들 필요 없음, 참고만):

공통 axios 클라이언트

src/api/http.js 에서 axios.create({ baseURL: 'http://localhost:8080/api' ... }) 형태로 인스턴스 생성.

응답 형태: { success, message, data }.
인터셉터에서 success === false 또는 HTTP 에러일 때 예외를 던지도록 되어 있음.

IMPLEMENTED_FEATURES

사용자 관리 (프론트 관점)

MealPlanPage.vue 진입 시:

localStorage에서 userId 조회.

없으면 POST /api/users 로 테스트 유저 생성 후 userId 저장.

상단에 “현재 사용자 ID: X” 정도로 표시하는 로직 존재.

IMPLEMENTED_FEATURES

식단 관리 (프론트 관점)

MealPlanPage.vue에서:

GET /api/users/{userId}/meal-plans/latest 호출해 최신 식단 개요를 가져옴.

POST /api/meal-plans 호출해 “한 달 식단 자동 생성” 가능.

MealPlanCalendar.vue 컴포넌트에서 30일치 카드가 렌더링되며, 현재는 총 kcal 정도만 보여주는 상태.

IMPLEMENTED_FEATURES

쇼핑 페이지

/shopping 라우트에서:

검색어 입력 → GET /api/shopping/search

동일 키워드로 GET /api/shopping/recommendations

일반 검색 결과 / 추천 결과를 나눠서 카드로 보여주는 UI 완료 상태.

IMPLEMENTED_FEATURES

2. 이번 작업 스코프 (Dev B – 오늘 해야 할 것)
2.1 식단 페이지 실데이터 대시보드화 (/meal-plans)
2.1.1 MealPlanOverviewResponse 기반 상태 구조 정리

파일: src/pages/MealPlanPage.vue

이미 overview 같은 ref에 최신 식단 개요가 들어오는 상태라고 가정.

overview 예시 형태 (서버 구조에 맞게 추론해서 사용):

{
  "planId": 1,
  "userId": 1,
  "startDate": "2025-12-09",
  "endDate": "2025-01-07",
  "totalDays": 30,
  "targetCaloriesPerDay": 2056,
  "days": [
    {
      "dayId": 101,
      "date": "2025-12-09",
      "totalCalories": 2056
      // 추후 상세용 필드가 더 생길 수 있음
    },
    ...
  ]
}


할 일:

overview 에서 다음 값들을 계산하는 computed 혹은 const + computed 로직 작성:

totalDays (이미 값 있음)

targetCaloriesPerDay

avgCalories : days 의 totalCalories 평균

achievementRate : avgCalories / targetCaloriesPerDay * 100 (소수점 1자리 or 반올림)

2.1.2 상단 통계 카드 UI 개선

위치: MealPlanPage.vue 상단 “이번 달 식단 개요” 영역.

할 일:

NnCard 내부에 3개의 작은 통계 카드를 flex/grid로 배치:

“이번 달 총 일 수 / 하루 목표 kcal”

“이번 주 평균 섭취 kcal (avgCalories)”

“목표 달성률 (achievementRate%)”

디자인 방향:

남남코치 기존 스타일 유지 (연한 파스텔 배경, 둥근 모서리, 살짝 그림자).

숫자는 굵게, 단위(kcal, %)는 옆에 작게.

2.1.3 MealPlanCalendar.vue – 실데이터 바인딩

파일: src/components/meal/MealPlanCalendar.vue

현재는 더미 exampleDays 혹은 내부에서 임의 배열을 쓰고 있을 가능성이 높음.

IMPLEMENTED_FEATURES

변경 요구사항:

props 정의

props로 days 배열을 받도록 수정:

const props = defineProps({
  days: {
    type: Array,
    required: true,
    // 각 원소: { dayId, date, totalCalories, ... }
  },
});


MealPlanPage.vue에서 전달

기존 <MealPlanCalendar /> 를 <MealPlanCalendar :days="overview.days" /> 형태로 수정.

UI 로직

각 날짜 카드는:

상단: MM/DD(요일) 형식의 날짜 (date 문자열 포맷팅)

중앙: totalCalories + ‘kcal’

하단: “상세 식단은 추후 추가 예정입니다.” 같은 텍스트 유지/수정

30개의 카드를 5x6 또는 4x8 + 2 정도의 responsive grid로 표시 (이미 비슷하게 되어 있다면 유지하면서 데이터만 교체).

2.1.4 로딩/에러 UX 정리

파일: MealPlanPage.vue

요구사항:

isLoading 이 true일 때:

“식단 정보를 불러오는 중입니다…” 라는 문구를 NnCard 안 중앙에 표시.

errorMessage 가 있을 때:

상단에 빨간색 작은 문장으로 출력.

“식단 자동 생성” 버튼:

isLoading === true 일 때 disabled + “처리 중…” 텍스트로 변경 (이미 어느 정도 구현되어 있으면 정리만).

2.2 쇼핑 페이지 – 식단 페이지와의 연결 준비 (라우팅만)

이번 단계에서는 실제 데이터 연동까지는 하지 않고, 라우팅/UX 흐름만 만들어 둔다.

2.2.1 “재료 쇼핑으로 이동” 버튼 추가

파일: MealPlanPage.vue

요구사항:

“식단 자동 생성” 버튼 오른쪽 또는 카드 하단 어딘가에 서브 버튼 추가:

라벨: 이 식단 재료 장보기 (준비중)

클릭 시: router.push('/shopping')

Vue Router 사용 (import { useRouter } from 'vue-router' + const router = useRouter();)

이 버튼은 지금은 단순히 쇼핑 페이지로만 이동하면 되고, 실제로 planId 나 재료 리스트를 넘기지는 않는다.

2.3 코드 스타일 / 기타 규칙

Vue 3 <script setup> 유지.

API 호출은 반드시 src/api/http.js 기반 모듈 (usersApi.js, mealPlanApi.js, shoppingApi.js) 을 통해 진행.

매직 넘버/문자열은 적당히 상수로 빼거나, 주석으로 의미를 남겨둘 것.

콘솔 로그는 디버깅용 1~2개 정도만 남기고, 과도한 것은 제거.

3. 완료 기준 (Acceptance Criteria)

/meal-plans 접속 시:

콘솔/Network 탭에서 latest API 호출이 성공하고,

상단 카드에:

“총 X일 · 하루 목표 Y kcal”

“이번 주 평균 섭취 kcal”

“목표 달성률 Z%”
가 모두 표시된다. (값은 백엔드 데이터 기반 계산)

가운데 식단 카드 영역에서:

30개의 날짜 카드가 렌더링되고,

각 카드에는 “날짜 + 총 kcal” 이 표시된다. (더미 데이터 X, 실제 overview.days 기반)

로딩 중에는:

카드 영역에 “식단 정보를 불러오는 중입니다…” 텍스트가 보이고,

상단 버튼이 비활성화 + “처리 중…”으로 표시된다.

에러 발생 시:

상단 빨간 문구에 에러 메시지가 표시된다.

콘솔에 적절한 에러 로그만 남는다.

“이 식단 재료 장보기 (준비중)” 버튼 클릭 시:

/shopping 라우트로 정상 이동한다.

기존 쇼핑 검색/추천 기능은 그대로 동작한다.