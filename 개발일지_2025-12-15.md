# 개발일지: 2025년 12월 15일

## 작업자

- Dev B (Gemini)

## 오늘 작업 내용

### 1. 사용자 인증 시스템 전체 구현 (프론트엔드)

- **목표:** 기존의 하드코딩된 사용자 ID(`userId=1`) 의존성을 제거하고, 실제 사용자 로그인 및 상태 관리를 위한 전체 인증 흐름을 구현했습니다.

- **주요 작업:**
    1.  **로그인 및 회원가입 페이지 생성:**
        - `src/pages/LoginPage.vue`: 이메일, 비밀번호를 입력하여 로그인을 요청하는 UI 및 로직 구현.
        - `src/pages/SignupPage.vue`: 이름, 이메일, 비밀번호, 비밀번호 확인을 통해 회원가입을 요청하는 UI 및 로직 구현.

    2.  **인증 API 및 유틸리티 모듈 개발:**
        - `src/api/authApi.js`: 백엔드의 `/api/auth/signup`, `/api/auth/login` API와 연동하는 함수를 구현했습니다.
        - `src/utils/auth.js`: 로그인 성공 시 받은 JWT 토큰과 사용자 정보를 `localStorage`에 저장하고, 가져오고, 삭제하는 헬퍼 함수(`saveAuth`, `getToken`, `getCurrentUser`, `clearAuth`)를 구현했습니다.

    3.  **전역 상태 관리 및 라우팅 제어:**
        - **Axios 인터셉터:** `src/api/http.js`를 수정하여 모든 API 요청 시 `Authorization: Bearer <TOKEN>` 헤더를 자동으로 추가하도록 설정했습니다.
        - **라우터 가드:** `src/router/index.js`에 `router.beforeEach`를 사용하여 전역 네비게이션 가드를 추가했습니다.
            - `meta: { requiresAuth: true }`가 설정된 페이지에 비로그인 사용자가 접근 시 `/login`으로 리디렉션합니다.
            - 로그인 사용자가 `/login`이나 `/signup` 페이지 접근 시 `/meal-plans`로 리디렉션합니다.

    4.  **기존 페이지 리팩토링:**
        - `MealPlanPage.vue`, `WeightPage.vue` 등 기존 페이지에서 하드코딩되어 있던 `userId`를 모두 제거했습니다.
        - 이제 `getCurrentUser()` 유틸리티 함수를 통해 현재 로그인된 사용자의 ID를 동적으로 가져와 API를 호출합니다.

    5.  **레이아웃 업데이트:**
        - `App.vue`를 수정하여 로그인 상태에 따라 UI가 동적으로 변경되도록 했습니다.
        - 로그인 시: 헤더 우측 상단에 사용자 이름과 "로그아웃" 버튼이 표시됩니다.
        - 로그아웃 시: "로그인" 버튼이 표시됩니다.
        - 로그아웃 버튼을 클릭하면 `localStorage`의 인증 정보가 삭제되고 로그인 페이지로 이동합니다.

### 2. Vite 경로 에일리어스(@) 설정 오류 수정

- **문제:** `@/`로 시작하는 절대 경로를 인식하지 못하는 `[plugin:vite:import-analysis]` 오류 발생.
- **해결:** `frontend/vite.config.js` 파일에 `resolve.alias` 설정을 추가하여 `@`가 `src` 디렉토리를 가리키도록 수정하여 문제를 해결했습니다.

## 특이사항

- 백엔드 Auth API는 아직 개발 중이라는 가정 하에 명세(PRD)에 따라 프론트엔드 로직을 구현했습니다. 실제 백엔드 API가 완성되면 추가적인 연동 테스트가 필요합니다.
- 현재 사용자 정보(`currentUser`)는 `App.vue`에서 `ref`와 `watch`를 통해 관리하고 있습니다. 대규모 애플리케이션으로 확장 시 Pinia나 Vuex 같은 중앙 상태 관리 라이브러리 도입을 고려해볼 수 있습니다.
