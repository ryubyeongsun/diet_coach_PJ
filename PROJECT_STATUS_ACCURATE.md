# Diet Coach 프로젝트 현황 최종 분석 보고서 (코드 기반)

이 문서는 2인 개발팀의 명확한 역할 분담을 위해, Markdown 문서뿐만 아니라 **프로젝트의 전체 소스 코드를 직접 분석하여** 작성한 최종 진척 상황 보고서입니다.

---

## 1. 프로젝트 개요 (기존과 동일)

- **프로젝트명**: Diet Coach (냠냠코치)
- **핵심 목표**: TDEE 기반 맞춤형 식단 추천 및 관련 식료품 쇼핑 지원.
- **기술 스택**:
    - **백엔드**: Java 17, Spring Boot, MyBatis, MySQL
    - **프론트엔드**: Vue 3, Vite, Axios, Vue Router

---

## 2. 코드 분석을 통해 발견된 핵심 사실 (매우 중요)

문서만으로는 알 수 없었던, 코드 분석을 통해서만 파악된 프로젝트의 실제 상태와 문제점들입니다.

### 가. 백엔드: 식단 생성은 현재 '가짜(Dummy)' 상태
- **현상**: `MealPlanServiceImpl`의 식단 생성 로직은 사용자 맞춤형으로 동작하지 않습니다. 매일 동일한 3개의 하드코딩된 메뉴(`닭가슴살`, `현미밥`, `샐러드`)를 30일 동안 반복하여 데이터베이스에 저장합니다.
- **영향**: 프론트엔드에는 30일치 계획이 표시되지만, 실제 내용은 무의미한 데이터의 반복입니다. **핵심 기능이 사실상 미구현 상태**입니다.
- **근거**: `MealPlanServiceImpl.java` 소스 코드.

### 나. 백엔드: 상품 추천 기능은 '동작 불가(Broken)' 상태
- **현상**: `ElevenstShoppingClient`는 실제 11번가 API를 호출하는 하이브리드 방식이지만, **실제 API 응답에는 상품 추천 로직에 필수적인 `'gramPerUnit'` (단위당 그램) 필드가 누락**되어 있습니다.
- **영향**: 이로 인해 상품 추천(`recommend`) 기능은 실제 API 호출 시 항상 실패하고, 예외 처리 로직에 따라 Mock 데이터를 반환할 때만 정상적으로 보이는 '반쪽짜리' 기능입니다.
- **근거**: `ElevenstShoppingClient.java`, `ShoppingServiceImpl.java` 소스 코드.

### 다. 데이터베이스: '그램(g)' 단위의 부재
- **현상**: `meal_items` 테이블과 관련 DTO에 칼로리(`calories`)만 저장될 뿐, 음식의 양을 나타내는 **'그램(g)' 정보가 완전히 누락**되어 있습니다.
- **영향**: 식단에 필요한 총 재료의 양을 계산할 수 없어, "식단 기반 장보기"라는 핵심 흐름이 원천적으로 불가능합니다. 이는 '나'항목의 문제와 직접적으로 연결되는 심각한 설계 결함입니다.
- **근거**: `schema.sql`, `MealPlanMapper.xml`.

### 라. 프론트엔드: 요구사항을 상회하는 높은 완성도
- **현상**: `MealPlanPage.vue`는 사용자 자동 생성, API 연동, 로딩/에러 상태 관리, 통계 데이터 계산 등 `오늘할일.md`에 명시된 요구사항 대부분이 이미 구현되어 있습니다.
- **영향**: 프론트엔드는 백엔드의 데이터가 준비되면 즉시 기능을 완성할 수 있는, 매우 견고하고 발전된 상태입니다.
- **근거**: `frontend/src/pages/MealPlanPage.vue` 소스 코드.

---

## 3. 정확한 현재 상태 (As-Is) 요약

- **사용자 관리**: 정상 동작.
- **식단 관리**: '가짜' 데이터로 30일치 계획을 생성/저장/조회하는 흐름은 가능. 대시보드 UI는 완성 단계.
- **쇼핑**:
    - **일반 검색**: 실제 API와 연동하여 정상 동작.
    - **상품 추천**: **실제 API 연동 시 동작 불가.** Mock 데이터로만 동작.

---

## 4. 코드 분석 기반 역할 분담 제안

위 분석 결과를 바탕으로, 프로젝트 성공을 위해 **반드시 해결해야 할 과제**들을 중심으로 역할을 재정의합니다.

### 역할 1: 백엔드 담당 (Backend Specialist) - **핵심 기능 구현 및 결함 수정**

**목표**: 현재 동작하지 않거나 가짜인 핵심 기능(식단, 쇼핑 추천)을 실제 동작하도록 만들고, 설계 결함을 바로잡습니다. **프로젝트의 블로커(Blocker)를 해결하는 최우선 순위 역할입니다.**

**주요 작업 (권장 순서):**
1.  **[긴급] 상품 추천 기능 수정**: `'gramPerUnit'` 문제를 해결해야 합니다.
    - **해결 방안 1**: 11번가 API 대신 `'gramPerUnit'` 정보를 제공하는 다른 커머스 API를 탐색하고 교체.
    - **해결 방안 2**: 현재 API를 유지하되, 상품명에 포함된 '100g', '500g' 등의 텍스트를 파싱하여 `gramPerUnit` 값을 추정하는 로직을 추가.
2.  **[필수] 데이터베이스 스키마 확장**: `meal_items` 테이블에 `grams` (섭취량) 컬럼을 추가하고 관련 DTO 및 Mapper를 모두 수정합니다.
3.  **[필수] 지능형 식단 생성 로직 구현**: **현재의 가짜 `MealPlanServiceImpl`을 폐기하고, 새로운 로직을 구현합니다.**
    - 사용자의 `target_calories`(목표 칼로리)에 맞춰, 미리 정의된 다양한 음식 목록(음식명, g당 칼로리, 기본 g 등)에서 무작위 혹은 특정 알고리즘으로 조합하여 실제 의미있는 식단을 생성해야 합니다.
    - 생성된 데이터는 확장된 `meal_items` 테이블(`grams` 포함)에 정확히 저장되어야 합니다.
4.  **[후순위] 체중 기록(`WeightRecord`) 도메인 구현**: 위의 핵심 기능들이 정상화된 후 진행합니다.

### 역할 2: 프론트엔드 담당 (Frontend Specialist) - **기능 연결 및 완성**

**목표**: 이미 잘 구현된 UI 컴포넌트들을 백엔드의 실제 데이터와 최종적으로 연결하고, 사용자 경험을 완성합니다.

**주요 작업:**
1.  **식단 상세 모달 완성**:
    - `MealPlanCalendar.vue`에서 날짜 클릭 시, 백엔드에 `GET /api/meal-plans/days/{dayId}` API를 호출하여 해당 날짜의 상세 식단(아침/점심/저녁 메뉴, 칼로리, **그램**)을 받아 `MealPlanDayModal.vue`에 표시합니다.
2.  **쇼핑 페이지 기능 연결**:
    - `MealPlanPage.vue`에서 넘겨받은 `planId`를 활용, 백엔드에 "식단 재료 목록 조회" API(`GET /api/meal-plans/{planId}/ingredients`)를 호출합니다.
    - 조회된 재료 목록을 `ShoppingPage.vue`에 표시하고, 각 재료를 클릭하면 해당 키워드로 검색/추천을 수행하도록 구현합니다.
3.  **UI/UX 폴리싱**: 전반적인 디자인 다듬기, 애니메이션 추가 등 사용자 경험을 향상시킵니다.
