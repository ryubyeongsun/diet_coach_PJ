# 개발일지: 2025-12-12

**작성자**: Gemini (AI)

## 오늘 진행한 작업 요약

-   백엔드 500 에러 디버깅 및 수정 (2건)
-   프론트엔드 기능 구현 (Dev B 작업 명세 기반)
    -   쇼핑 페이지 UX 고도화 (상품 카드, 임시 장바구니)
    -   식단 페이지 데이터 표시 개선 (칼로리, 섭취량)
-   프론트엔드 '상품 담기' 버튼 중복 추가 버그 수정
-   프로젝트 현황 분석 및 역할 분담 제안 문서 작성

## 상세 작업 내역

### 1. 프로젝트 분석 및 계획 수립

-   `IMPLEMENTED_FEATURES.md`: 코드 베이스를 분석하여 현재까지 구현된 기능과 미구현 기능을 정리한 문서를 작성했습니다.
-   `오늘할일.md`: 분석된 현황을 바탕으로, 2인 팀을 위한 백엔드/프론트엔드 역할 분담 및 작업 계획을 제안했습니다.

### 2. 백엔드 500 에러 디버깅

-   **문제점**: `merge` 이후 `GET /.../meal-plans/latest` 요청 시 500 에러 발생.
-   **원인 분석**: `meal_items` 테이블에 `grams` 컬럼이 누락되어 DB 조회 시 SQL 에러가 발생한 것을 확인.
-   **1차 조치**: 사용자 DB 스키마 업데이트 방안 안내.
-   **후속 문제**: DB 초기화 후 `POST /meal-plans` 요청 시 500 에러 발생.
-   **원인 분석**: DB에 사용자가 없는 상태에서 API가 호출되어 `IllegalArgumentException`이 발생, `GlobalExceptionHandler`에 의해 500 에러로 처리됨.
-   **2차 조치**: `MealPlanServiceImpl`에서 `IllegalArgumentException`을 `BusinessException`으로 변경하여, '존재하지 않는 사용자'에 대해 400 에러와 명확한 메시지가 반환되도록 수정.

### 3. 프론트엔드 기능 구현 (PRD 기반)

-   **`ShoppingPage.vue` UX 고도화**
    -   `ShoppingProductCard.vue` 컴포넌트를 수정하여 상품 가격, 몰 이름, 총 그램(g), 100g당 가격 등 추가 정보를 표시하도록 UI를 개선했습니다.
    -   '담기' 버튼을 클릭하여 상품을 임시 장바구니에 추가하는 기능을 구현했습니다.
    -   페이지 하단에 '선택한 상품 요약' 카드를 추가하여, 담은 상품 수, 총 금액, 총 무게를 계산하여 보여주고, '선택 초기화' 버튼으로 비울 수 있도록 구현했습니다. (프론트엔드 상태로만 관리)

-   **식단 페이지 데이터 표시 개선**
    -   `MealPlanCalendar.vue`: 월간 식단 달력의 각 날짜 카드에 표시되는 칼로리를 API 응답값(`totalCalories`)으로 표시하고, 값이 없을 경우 '-'로 표시되도록 안전하게 수정했습니다.
    -   `MealPlanDayModal.vue`: 식단 상세 정보 모달에서 각 음식의 섭취량(`grams`) 정보가 있을 경우, '150g · 200 kcal' 형태로 표시되도록 수정했습니다.

### 4. 프론트엔드 버그 수정

-   **문제점**: '담기' 버튼 클릭 시 장바구니에 상품이 2개씩 추가되는 현상 발생.
-   **원인 분석**: 공통 컴포넌트인 `NnButton.vue`에 `emits` 선언이 누락되어, Vue의 이벤트 리스너가 'fallthrough'되어 중복으로 호출되는 문제였습니다.
-   **조치**: `NnButton.vue`에 `defineEmits(['click'])`를 추가하고, `emit`을 사용하도록 수정하여 이벤트가 한 번만 발생하도록 정상화했습니다.

## 특이사항

-   개발 과정에서 문서(기획서)와 실제 코드 간의 차이점을 발견했으나, 코드 분석을 통해 현재 상태를 정확히 파악하고 작업을 진행했습니다.
-   Vue 컴포넌트의 `emits` 옵션 미선언이 유발하는 이벤트 중복 전파는 주의가 필요한 부분임을 다시 확인했습니다.
